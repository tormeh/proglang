program p:Nothing =
{
  synchronized variable synchronizedNumber:Integer = {synchronized(variable=0, writer=threadPrintHello)}
  threadPrintHello(synchronizedNumber)
  threadPrintWorld(synchronizedNumber)
  threadPrintLol(actionPrintFoo=actionPrintFoo, integerIdentity=integerIdentity)
}

thread threadPrintWorld(synchronizedNumber:Integer):Nothing =
{
  actionPrint("world ")
  actionPrint(toString(synchronizedNumber))
  actionPrint("\n")
  threadPrintWorld(synchronizedNumber)
}
  
thread threadPrintHello(synchronizedNumber:Integer):Nothing =
{
  actionPrint(toString(synchronizedNumber))
  actionPrint(" Hello ")
  actionMutate(variable=synchronizedNumber, newValue=plus(left=synchronizedNumber, right=1))
  threadPrintHello(synchronizedNumber)
}

thread threadPrintLol(actionPrintFoo:Inclusion, integerIdentity:Inclusion):Nothing =
{
  action actionPrintLol:Nothing =
  {
    actionPrint("  LOL   ")
  }

  actionPrintLol()
  actionPrintFoo(integerIdentity)
  threadPrintLol(actionPrintFoo=actionPrintFoo, integerIdentity=integerIdentity)
}

action actionPrintFoo(integerIdentity:Inclusion):Nothing =
{
  action actionPrintFooo:Nothing =
  {
    actionPrint("  FOOO  ")
  }
  actionPrint("  FOO   ")
  actionPrintFooo()
  actionPrint(toString(integerIdentity(5)))
  actionPrint("  ")
  actionPrint(if(condition=true, then=toString(6), else=toString(3)))
  actionPrint("  ")
}

function integerIdentity(x:Integer):Integer = {x}
